<!DOCTYPE HTML>
<!--
	Ion by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html class="no-js">
<head>
    <style>
        .js #fouc {display: none}
        a:link {color : #57A0EE; text-decoration:none;}

        #page_num {
            font-size: 14px;
            margin-left: 260px;
            margin-top:30px;
        }
        #page_num ul li {
            float: left;
            margin-left: 10px;
            text-align: center;
        }
        .fo_re {
            font-weight: bold;
            color:#204d74;
        }

    </style>
    <script>
        (function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)
    </script>

    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready( function() {

            $("#headers").load("headers.html");  // 원하는 파일 경로를 삽입하면 된다
            $("#footers").load("footer.html");  // 추가 인클루드를 원할 경우 이런식으로 추가하면 된다
            $("#menu").load("menu.html");

        });
    </script>

    <title>CHOIshop</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <!--[if lte IE 8]><script src="js/html5shiv.js"></script><![endif]-->
    <script src="js/jquery.min.js"></script>
    <script src="js/skel.min.js"></script>
    <script src="js/skel-layers.min.js"></script>
    <script src="js/init.js"></script>
    <noscript>
        <link rel="stylesheet" href="css/skel.css" />
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="css/style-xlarge.css" />
    </noscript>
</head>
<body id="top">
<div id="fouc">

    <!-- Header -->
    <header id="header" class="skel-layers-fixed">
        <h1><a href="main.html">CHOIshop</a></h1>

        <nav id="nav">
            <ul>
                <!--            <li><a href="main.html">Home</a></li>-->
                <!--            <li><a href="notice.html">NOTICE </a></li>-->
                <!--            <li><a href="q_and_a.html">Q&A </a></li>-->
                <!--            <li><a href="basket.html">장바구니 </a></li>-->
                <!--            <li><a href="registrater.html">회원가입 &nbsp &nbsp</a></li>-->

                <?php
                $connect = mysqli_connect("localhost","root","sql","data2019")or die ("connect fail");
                $query ="select * from board order by number desc";
                $result = $connect->query($query);
                $total = mysqli_num_rows($result);

                session_start();

                if(isset($_SESSION['id'])) {

                echo $_SESSION['id'];?>님 안녕하세요
                <li><a href="logout.php">&nbsp &nbsp &nbsp 로그아웃 </a></li>
                <li><a href="basket.html">장바구니 </a></li>
                <li><a href="main.html">Home</a></li>
                <!--                        <li><a href="registrater.html">회원가입 </a></li>-->
                <li><a href="notice.html">NOTICE </a></li>
                <li><a href="q_and_a.html">Q&A &nbsp &nbsp &nbsp &nbsp</a></li>
                <!--                        <button onclick="location.href='./logout.php'">로그아웃</button>-->
                <?php
                if($_SESSION['id']=='admin') {
                ?>
                <li><a href="add.html">관리자 페이지 &nbsp &nbsp</a></li>
                <?php
                }
                ?>
                <br/>
                <?php
                }
                else {
        ?>
                <li><a href="main.html">Home</a></li>
                <li><a href="login.html">로그인</a></li>
                <li><a href="registrater.html">회원가입 </a></li>
                <!--                        <li><a href="basket.html">장바구니 </a></li>-->
                <li><a href="notice.html">NOTICE </a></li>
                <li><a href="q_and_a.html">Q&A &nbsp &nbsp &nbsp &nbsp</a></li>
                <!--                        <button onclick="location.href='./login.php'">로그인</button>-->
                <br />

                <?php   }
        ?>



            </ul>
        </nav>
    </header>
    <!--</header>-->

    <!-- Main -->
    <section id="main" class="wrapper style1">
        <header class="major">
            <h2>CHOIshop</h2>
            <p>www.CHOIshop.com</p>
        </header>
        <div class="container">
            <div class="row">

                <!-- menu -->
                <div>
                    <section>
                        <h3>C A T E G O R Y</h3>
                        <br>
                                <ul class="actions" >
                                    <li><a href="add.html" class="button alt" style="width: 200px">상품 등록하기</a></li>
                                </ul>
                                <ul class="actions">
                                    <li><a href="popadd.html" class="button alt" style="width: 200px">팝업창 등록하기</a></li>
                                </ul>
                    </section>
                    <hr/>
                </div>
                <!--</menu>-->



                    <?php
                        $connect = mysqli_connect("localhost","root","sql","data2019")or die ("connect fail");
                        $query ="select * from  product_board order by number desc";
                        $result = $connect->query($query);
                            $total = mysqli_num_rows($result);

                     ?>
                    <div class="8u skel-cell-important">


                        <h2> 상품 등록하기 </h2>

                        <font style="cursor: hand"onClick="location.href='./product_write.php'">등록하기</font>
                        <br><br>

<!--                        <form method = "post" action = "product_category.php">-->
<!--                            <div>-->
<!--                                <div style="float: right; margin-right: 50px">-->
<!--                                    <input type="submit" value="보기">-->
<!--                                </div>-->
<!--                                <div style="float: right; width: 150px; ">-->
<!--                                    <select id="browsers" name="category" size="1" required autofocus>-->
<!--                                        <option value="ALL" selected>ALL</option>-->
<!--                                        <option value="TOP" >TOP</option>-->
<!--                                        <option value="OUTER">OUTER</option>-->
<!--                                        <option value="PANTS">PANTS</option>-->
<!--                                        <option value="DRESS" >DRESS</option>-->
<!--                                        <option value="SKIRT" >SKIRT</option>-->
<!--                                    </select>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </form>-->
<!--                        <br><br>-->



                        <table align = center>
                            <thead align = "center">
                            <tr>
                                <td width = "100" align="center">번호</td>
                                <td width = "100" align = "center">카테고리</td>
                                <td width = "500" align = "center">상품명</td>
                                <td width = "300" align = "center">가격</td>
                                <td width = "100" align = "center"></td>
                            </tr>
                            </thead>

                            <?php
                        if(isset($_GET['page'])){
                          $page = $_GET['page'];
                            }else{
                              $page = 1;
                            }

                        $sql = "select * from product_board";
                        $result1 = $connect->query($sql);
                            $row_num = mysqli_num_rows($result1); //게시판 총 레코드 수
                            $list = 10; //한 페이지에 보여줄 개수
                            $block_ct = 10; //블록당 보여줄 페이지 개수

                            $block_num = ceil($page/$block_ct); // 현재 페이지 블록 구하기
                            $block_start = (($block_num - 1) * $block_ct) + 1; // 블록의 시작번호
                            $block_end = $block_start + $block_ct - 1; //블록 마지막 번호

                            $total_page = ceil($row_num / $list); // 페이징한 페이지 수 구하기
                            if($block_end > $total_page) $block_end = $total_page; //만약 블록의 마지박 번호가 페이지수보다 많다면 마지박번호는 페이지 수
                            $total_block = ceil($total_page/$block_ct); //블럭 총 개수
                            $start_num = ($page-1) * $list; //시작번호 (page-1)에서 $list를 곱한다.

                            $sql2 = "select * from product_board order by number desc limit $start_num, $list";
                            $result2 = $connect->query($sql2);
                            while($board = $result2->fetch_array()){
                            $title=$board["title"];

                            ?>


                            <tbody>

                                <td width = "50" align = "center"><?php echo $total?></td>
                                <td width = "500" align = "center">
                                    <a href = "product_view.php?number=<?php echo $board['number']?>">
                                        <?php echo $board['category']?></td>

                                <td width = "100" align = "center"><?php echo $board['name']?></td>
                                <td width = "200" align = "center"><?php echo $board['price']?>원</td>

                            </tr>
                            <?php
                    $total--;
                    }
            ?>
                            </tbody>
                        </table>

                        <div id="page_num">
                            <ul style="list-style: none; vertical-align:middle;">
                                <?php
                              if($page <= 1)
                              { //만약 page가 1보다 크거나 같다면
                                echo "<li class='fo_re'>처음</li>"; //처음이라는 글자에 빨간색 표시
                                }else{
                                echo "<li><a href='?page=1'>처음</a></li>"; //알니라면 처음글자에 1번페이지로 갈 수있게 링크
                                }
                                if($page <= 1)
                                { //만약 page가 1보다 크거나 같다면 빈값

                                }else{
                                $pre = $page-1; //pre변수에 page-1을 해준다 만약 현재 페이지가 3인데 이전버튼을 누르면 2번페이지로 갈 수 있게 함
                                echo "<li><a href='?page=$pre'>이전</a></li>"; //이전글자에 pre변수를 링크한다. 이러면 이전버튼을 누를때마다 현재 페이지에서 -1하게 된다.
                                }
                                for($i=$block_start; $i<=$block_end; $i++){
                                //for문 반복문을 사용하여, 초기값을 블록의 시작번호를 조건으로 블록시작번호가 마지박블록보다 작거나 같을 때까지 $i를 반복시킨다
                                if($page == $i){ //만약 page가 $i와 같다면
                                echo "<li class='fo_re'>[$i]</li>"; //현재 페이지에 해당하는 번호에 굵은 빨간색을 적용한다
                                }else{
                                echo "<li><a href='?page=$i'>[$i]</a></li>"; //아니라면 $i
                                }
                                }
                                if($block_num >= $total_block){ //만약 현재 블록이 블록 총개수보다 크거나 같다면 빈 값
                                }else{
                                $next = $page + 1; //next변수에 page + 1을 해준다.
                                echo "<li><a href='?page=$next'>다음</a></li>"; //다음글자에 next변수를 링크한다. 현재 4페이지에 있다면 +1하여 5페이지로 이동하게 된다.
                                }
                                if($page >= $total_page){ //만약 page가 페이지수보다 크거나 같다면
                                echo "<li class='fo_re'>마지막</li>"; //마지막 글자에 긁은 빨간색을 적용한다.
                                }else{
                                echo "<li><a href='?page=$total_page'>마지막</a></li>"; //아니라면 마지막글자에 total_page를 링크한다.
                                }
                                ?>
                            </ul>
                        </div>


                        <br>


                </div>




            </div>

        </div>
    </section>

    <!-- Footer -->
    <div id="footers"></div>
    <!--</footer>-->

</div> <!-- /#fouc -->

<script>
    document.getElementById("fouc").style.display="block";
</script>

</body>
</html>